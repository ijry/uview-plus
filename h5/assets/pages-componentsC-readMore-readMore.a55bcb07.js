import{_ as e}from"./u-parse.7515bfad.js";import{l as t,m as o,f as s,A as n,n as a,v as i,x as r,d as l,o as d,c as u,w as g,a as c,s as h,y as p,h as m,u as f,i as _}from"./index-5c632734.js";import{r as y}from"./uni-app.es.eed02550.js";import{_ as x}from"./u-text.9c52134c.js";import{_ as S}from"./u-icon.9bc10553.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-link.eb150e89.js";const H=w({name:"u-read-more",mixins:[o,s,{props:{showHeight:{type:[String,Number],default:()=>t.readMore.showHeight},toggle:{type:Boolean,default:()=>t.readMore.toggle},closeText:{type:String,default:()=>t.readMore.closeText},openText:{type:String,default:()=>t.readMore.openText},color:{type:String,default:()=>t.readMore.color},fontSize:{type:[String,Number],default:()=>t.readMore.fontSize},shadowStyle:{type:Object,default:()=>({backgroundImage:"linear-gradient(-180deg, rgba(255, 255, 255, 0) 0%, #fff 80%)",paddingTop:"100px",marginTop:"-100px"})},textIndent:{type:String,default:()=>t.readMore.textIndent},name:{type:[String,Number],default:()=>t.readMore.name}}}],data:()=>({isLongContent:!1,status:"close",elId:n(),contentHeight:100}),computed:{innerShadowStyle(){return"open"===this.status?{}:this.shadowStyle}},mounted(){this.init()},emits:["open","close"],methods:{addUnit:a,async init(){this.getContentHeight().then((e=>{this.contentHeight=e,e>i(this.showHeight)?(this.isLongContent=!0,this.status="close"):(this.isLongContent=!1,this.status="close")}))},async getContentHeight(){return await r(30),new Promise((e=>{this.$uGetRect("."+this.elId).then((t=>{e(t.height)}))}))},toggleReadMore(){this.status="close"===this.status?"open":"close",0==this.toggle&&(this.isLongContent=!1),this.$emit(this.status,this.name)}}},[["render",function(e,t,o,s,n,a){const i=_,r=y(l("up-text"),x),w=y(l("u-icon"),S);return d(),u(i,{class:"u-read-more"},{default:g((()=>[c(i,{class:"u-read-more__content",style:h({height:n.isLongContent&&"close"===n.status?a.addUnit(e.showHeight):a.addUnit(n.contentHeight),textIndent:e.textIndent})},{default:g((()=>[c(i,{class:p(["u-read-more__content__inner",[n.elId]]),ref:"u-read-more__content__inner"},{default:g((()=>[m(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])])),_:3},8,["style"]),n.isLongContent?(d(),u(i,{key:0,class:"u-read-more__toggle",style:h([a.innerShadowStyle])},{default:g((()=>[m(e.$slots,"toggle",{},(()=>[c(i,{class:"u-read-more__toggle__text",onClick:a.toggleReadMore},{default:g((()=>[c(r,{text:"close"===n.status?e.closeText:e.openText,color:e.color,size:e.fontSize,lineHeight:e.fontSize,margin:"0 5px 0 0"},null,8,["text","color","size","lineHeight"]),c(i,{class:"u-read-more__toggle__icon"},{default:g((()=>[c(w,{color:e.color,size:e.fontSize+2,name:"close"===n.status?"arrow-down":"arrow-up"},null,8,["color","size","name"])])),_:1})])),_:1},8,["onClick"])]),!0)])),_:3},8,["style"])):f("",!0)])),_:3})}],["__scopeId","data-v-b7d80760"]]);const C=w({data:()=>({content:"<p>浔阳江头夜送客，枫叶荻花秋瑟瑟。主人下马客在船，举酒欲饮无管弦。醉不成欢惨将别，别时茫茫江浸月。\n\t\t\t\t\t忽闻水上琵琶声，主人忘归客不发。寻声暗问弹者谁，琵琶声停欲语迟。移船相近邀相见，添酒回灯重开宴。千呼万唤始出来，犹抱琵琶半遮面。转轴拨弦三两声，未成曲调先有情。弦弦掩抑声声思，似诉平生不得志。低眉信手续续弹，说尽心中无限事。轻拢慢捻抹复挑，初为《霓裳》后《六幺》。大弦嘈嘈如急雨，小弦切切如私语。嘈嘈切切错杂弹，大珠小珠落玉盘。间关莺语花底滑，幽咽泉流冰下难。冰泉冷涩弦凝绝，凝绝不通声暂歇。别有幽愁暗恨生，此时无声胜有声。银瓶乍破水浆迸，铁骑突出刀枪鸣。曲终收拨当心画，四弦一声如裂帛。东船西舫悄无言，唯见江心秋月白。\n\t\t\t\t\t沉吟放拨插弦中，整顿衣裳起敛容。自言本是京城女，家在虾蟆陵下住。十三学得琵琶成，名属教坊第一部。曲罢曾教善才服，妆成每被秋娘妒。五陵年少争缠头，一曲红绡不知数。钿头银篦击节碎，血色罗裙翻酒污。今年欢笑复明年，秋月春风等闲度。弟走从军阿姨死，暮去朝来颜色故。门前冷落鞍马稀，老大嫁作商人妇。商人重利轻别离，前月浮梁买茶去。去来江口守空船，绕船月明江水寒。夜深忽梦少年事，梦啼妆泪红阑干。\n\t\t\t\t\t我闻琵琶已叹息，又闻此语重唧唧。同是天涯沦落人，相逢何必曾相识！我从去年辞帝京，谪居卧病浔阳城。浔阳地僻无音乐，终岁不闻丝竹声。住近湓江地低湿，黄芦苦竹绕宅生。其间旦暮闻何物？杜鹃啼血猿哀鸣。春江花朝秋月夜，往往取酒还独倾。岂无山歌与村笛？呕哑嘲哳难为听。今夜闻君琵琶语，如听仙乐耳暂明。莫辞更坐弹一曲，为君翻作《琵琶行》。感我此言良久立，却坐促弦弦转急。凄凄不似向前声，满座重闻皆掩泣。座中泣下谁最多？江州司马青衫湿。</p>",showHeight:200,tagStyle:{p:"color: #606266; line-height: 24px;"}}),methods:{load(){this.$refs.uReadMore.init()},open(e){console.log("open",e)},close(e){console.log("close",e)}}},[["render",function(t,o,s,n,a,i){const r=y(l("up-parse"),e),h=y(l("up-read-more"),H),p=_;return d(),u(p,{class:"u-page"},{default:g((()=>[c(h,{ref:"uReadMore",showHeight:a.showHeight,toggle:"",onOpen:i.open,onClose:i.close},{default:g((()=>[c(r,{content:a.content,onLoad:i.load,"tag-style":a.tagStyle},null,8,["content","onLoad","tag-style"])])),_:1},8,["showHeight","onOpen","onClose"])])),_:1})}]]);export{C as default};
