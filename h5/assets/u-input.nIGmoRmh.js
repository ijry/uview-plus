import{_ as e}from"./u-icon.CAQ5gt-D.js";import{l as t,n,m as i,f as o,Z as a,q as l,s as r,p as s,y as u,r as p,o as d,c,w as f,a as h,h as y,v as m,u as g,z as b,i as S,a5 as x}from"./index-BTlj1ZB6.js";import{r as _}from"./uni-app.es.BPmfbqLa.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=C({name:"u-input",mixins:[i,o,t({props:{modelValue:{type:[String,Number],default:()=>n.input.value},type:{type:String,default:()=>n.input.type},fixed:{type:Boolean,default:()=>n.input.fixed},disabled:{type:Boolean,default:()=>n.input.disabled},disabledColor:{type:String,default:()=>n.input.disabledColor},clearable:{type:Boolean,default:()=>n.input.clearable},password:{type:Boolean,default:()=>n.input.password},maxlength:{type:[String,Number],default:()=>n.input.maxlength},placeholder:{type:String,default:()=>n.input.placeholder},placeholderClass:{type:String,default:()=>n.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>n.input.placeholderStyle},showWordLimit:{type:Boolean,default:()=>n.input.showWordLimit},confirmType:{type:String,default:()=>n.input.confirmType},confirmHold:{type:Boolean,default:()=>n.input.confirmHold},holdKeyboard:{type:Boolean,default:()=>n.input.holdKeyboard},focus:{type:Boolean,default:()=>n.input.focus},autoBlur:{type:Boolean,default:()=>n.input.autoBlur},disableDefaultPadding:{type:Boolean,default:()=>n.input.disableDefaultPadding},cursor:{type:[String,Number],default:()=>n.input.cursor},cursorSpacing:{type:[String,Number],default:()=>n.input.cursorSpacing},selectionStart:{type:[String,Number],default:()=>n.input.selectionStart},selectionEnd:{type:[String,Number],default:()=>n.input.selectionEnd},adjustPosition:{type:Boolean,default:()=>n.input.adjustPosition},inputAlign:{type:String,default:()=>n.input.inputAlign},fontSize:{type:[String,Number],default:()=>n.input.fontSize},color:{type:String,default:()=>n.input.color},prefixIcon:{type:String,default:()=>n.input.prefixIcon},prefixIconStyle:{type:[String,Object],default:()=>n.input.prefixIconStyle},suffixIcon:{type:String,default:()=>n.input.suffixIcon},suffixIconStyle:{type:[String,Object],default:()=>n.input.suffixIconStyle},border:{type:String,default:()=>n.input.border},readonly:{type:Boolean,default:()=>n.input.readonly},shape:{type:String,default:()=>n.input.shape},formatter:{type:[Function,null],default:()=>n.input.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}})],data:()=>({clearInput:!1,innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){this.formatter&&(this.innerFormatter=this.formatter)},watch:{modelValue:{immediate:!0,handler(e,t){this.changeFromInner||this.innerValue===e||(this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner?this.valueChange(this.innerValue,!0):this.firstChange||a(this,"change"),this.firstChange=!1),this.changeFromInner=!1}}},computed:{isShowClear(){const{clearable:e,readonly:t,focused:n,innerValue:i}=this;return!!e&&!t&&!!n&&""!==i},inputClass(){let e=[],{border:t,disabled:n,shape:i}=this;return"surround"===t&&(e=e.concat(["u-border","u-input--radius"])),e.push(`u-input--${i}`),"bottom"===t&&(e=e.concat(["u-border-bottom","u-input--no-radius"])),e.join(" ")},wrapperStyle(){const e={};return this.disabled&&(e.backgroundColor=this.disabledColor),"none"===this.border?e.padding="0":(e.paddingTop="6px",e.paddingBottom="6px",e.paddingLeft="9px",e.paddingRight="9px"),l(e,r(this.customStyle))},inputStyle(){return{color:this.color,fontSize:s(this.fontSize),textAlign:this.inputAlign}}},emits:["update:modelValue","focus","blur","change","confirm","clear","keyboardheightchange"],methods:{setFormatter(e){this.innerFormatter=e},onInput(e){let{value:t=""}=e.detail||{};this.innerValue=t,this.$nextTick((()=>{let e=this.innerFormatter(t);this.innerValue=e,this.valueChange(e)}))},onBlur(e){this.$emit("blur",e.detail.value),u(150).then((()=>{this.focused=!1})),a(this,"blur")},onFocus(e){this.focused=!0,this.$emit("focus")},doFocus(){this.$refs["input-native"].focus()},doBlur(){this.$refs["input-native"].blur()},onConfirm(e){this.$emit("confirm",this.innerValue)},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},valueChange(e,t=!1){this.clearInput&&(this.innerValue="",this.clearInput=!1),this.$nextTick((()=>{t&&!this.clearInput||(this.changeFromInner=!0,this.$emit("change",e),this.$emit("update:modelValue",e)),a(this,"change")}))},onClear(){this.clearInput=!0,this.innerValue="",this.$nextTick((()=>{this.valueChange(""),this.$emit("clear")}))},clickHandler(){}}},[["render",function(t,n,i,o,a,l){const r=_(p("u-icon"),e),s=S,u=x;return d(),c(s,{class:b(["u-input",l.inputClass]),style:g([l.wrapperStyle])},{default:f((()=>[h(s,{class:"u-input__content"},{default:f((()=>[t.prefixIcon||t.$slots.prefix?(d(),c(s,{key:0,class:"u-input__content__prefix-icon"},{default:f((()=>[y(t.$slots,"prefix",{},(()=>[h(r,{name:t.prefixIcon,size:"18",customStyle:t.prefixIconStyle},null,8,["name","customStyle"])]),!0)])),_:3})):m("",!0),h(s,{class:"u-input__content__field-wrapper",onClick:l.clickHandler},{default:f((()=>[h(u,{ref:"input-native",class:"u-input__content__field-wrapper__field",style:g([l.inputStyle]),type:t.type,focus:t.focus,cursor:t.cursor,value:a.innerValue,"auto-blur":t.autoBlur,disabled:t.disabled||t.readonly,maxlength:t.maxlength,placeholder:t.placeholder,"placeholder-style":t.placeholderStyle,"placeholder-class":t.placeholderClass,"confirm-type":t.confirmType,"confirm-hold":t.confirmHold,"hold-keyboard":t.holdKeyboard,"cursor-spacing":t.cursorSpacing,"adjust-position":t.adjustPosition,"selection-end":t.selectionEnd,"selection-start":t.selectionStart,password:t.password||"password"===t.type||!1,ignoreCompositionEvent:t.ignoreCompositionEvent,onInput:l.onInput,onBlur:l.onBlur,onFocus:l.onFocus,onConfirm:l.onConfirm,onKeyboardheightchange:l.onkeyboardheightchange},null,8,["style","type","focus","cursor","value","auto-blur","disabled","maxlength","placeholder","placeholder-style","placeholder-class","confirm-type","confirm-hold","hold-keyboard","cursor-spacing","adjust-position","selection-end","selection-start","password","ignoreCompositionEvent","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])])),_:1},8,["onClick"]),l.isShowClear?(d(),c(s,{key:1,class:"u-input__content__clear",onClick:l.onClear},{default:f((()=>[h(r,{name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"})])),_:1},8,["onClick"])):m("",!0),t.suffixIcon||t.$slots.suffix?(d(),c(s,{key:2,class:"u-input__content__subfix-icon"},{default:f((()=>[y(t.$slots,"suffix",{},(()=>[h(r,{name:t.suffixIcon,size:"18",customStyle:t.suffixIconStyle},null,8,["name","customStyle"])]),!0)])),_:3})):m("",!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-e58c0e93"]]);export{I as _};
