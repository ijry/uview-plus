import{_ as o,c as e,w as d,p as t,i,r as s,q as n,a,o as r,g as c,n as l}from"./index-DK-7qgp5.js";const h=o({data:()=>({id:"",videoAd:""}),onLoad(o){this.videoAdCreat()},onShow(){let o=t(),e=o[o.length-1];console.log(e.options);let d=e.options;if(d.scene){const o=decodeURIComponent(d.scene);this.id=o,console.log(this.id)}else this.id=""},methods:{videoAdCreat(){wx.createRewardedVideoAd?(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-fe31910e54f0cdc9"}),this.videoAd.onError(o=>{1004!=o.errCode?wx.showToast({title:this.videoAdErrHandle(o),icon:"none"}):(wx.showToast({title:"无需观看已跳过",icon:"none"}),this.watchEnd())}),this.videoAd.onClose(o=>{o&&o.isEnded||void 0===o?(console.log("视频正常关闭 下发奖励"),this.watchEnd()):wx.showToast({title:"未完整观看视频不能获取奖励哦",icon:"none"})})):wx.showToast({title:"请升级微信",icon:"none"})},videoAdLoad(){this.videoAd.show().catch(o=>{this.videoAd.load().then(()=>this.videoAd.show()).catch(o=>{wx.showToast({title:this.videoAdErrHandle(o),icon:"none"})})})},watchEnd(){uni.request({url:"https://uiadmin.net/api/v1/wxapp/ad/end",data:{id:this.id,version:"1.1"},method:"put",header:{},success:o=>{console.log(o.data),200!=o.data.code&&wx.showToast({title:o.data.msg,icon:"none"})}})},videoAdErrHandle(o){console.log("视频加载失败"),console.log(o);return{1e3:"后端接口调用失败",1001:"参数错误",1002:"广告单元无效",1003:"内部错误",1004:"无合适的广告",1005:"广告组件审核中",1006:"广告组件被驳回",1007:"广告组件被封禁",1008:"广告单元已关闭"}[o.errCode]||"视频加载错误,重新加载页面试试吧"}}},[["render",function(o,t,h,w,p,v){const u=s(a("up-button"),n),A=i;return r(),e(A,{style:{margin:"100px 30px"}},{default:d(()=>[c(u,{type:"primary",onClick:v.videoAdLoad},{default:d(()=>[l("打开广告")]),_:1},8,["onClick"]),c(A,{style:{margin:"20px 30px"}},{default:d(()=>[l("观看完成请点击关闭按钮")]),_:1})]),_:1})}]]);export{h as default};
