(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{288:function(t,e,a){"use strict";var s=a(292),i=a.n(s),r=a(73);let n={request:async(t,e)=>{let a=localStorage.getItem("userState");a&&(a=JSON.parse(a)),console.log("userState",a);let s="";"string"==typeof t?e.url=t:e=t,e.url.startsWith("/")&&(s="https://fastview.lingyun.net/api"+e.url);const r={"Content-Type":"application/json",Authorization:a?a.token:""};let n=(await i()(s,{method:e.method,data:e&&e.data?e.data:{},params:e&&e.params?e.params:{},headers:r})).data;if(401!=n.code)return n;alert("未登录")},formatTime:function(t,e){return n.timeFormat(t,e)},timeFormat:function(t,e){if(!t)return"";e||(e="yyyy-MM-dd HH:mm");let a="";if("object"==typeof t)a=t;else{if("number"!=typeof t)return t;a=new Date(1e3*t)}/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));let s={"M+":a.getMonth()+1,"d+":a.getDate(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(let t in s)if(new RegExp(`(${t})`).test(e)){let a=s[t]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?a:n.padLeftZero(a))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)},showToast:function(t){Object(r.Message)(t.msg)}};e.a=n},423:function(t,e,a){},534:function(t,e,a){"use strict";a(423)},544:function(t,e,a){"use strict";a.r(e);var s=a(288),i={mixins:[{name:"getRet",data:()=>({timer:null,payResult:""}),created:function(){},mounted:async function(){},beforeUnmount(){clearInterval(this.timer)},methods:{async getPayResult(t){let e=this,a=await s.a.request({url:"/v1/pay/order/info",params:{tradeNo:t},method:"get"});200==a.code?a.data.info.payTime>0&&(clearInterval(this.timer),this.payResult="支付成功，即将跳转。",setTimeout((function(){e.$router.push({path:"/user/center"})}),1e3)):console.log(a)}}}],data:()=>({payType:"alipay",qrTypeList:{alipay:{name:"支付宝"},wxpay:{name:"微信"}},orderNum:"----",realMoney:"0",payString:""}),mounted(){this.getData()},watch:{$route(){this.getData()}},methods:{getData(){let t=this.$route.query;console.log(t),this.payType=t.payType,this.orderNum=t.tradeNo,"alipay"!=this.payType?this.payString=decodeURIComponent(t.payString):this.payString=t.payString,this.realMoney=t.realMoney;let e=this;clearInterval(this.timer),this.timer=setInterval((function(){e.getPayResult(e.orderNum)}),3e3)}}},r=(a(534),a(6)),n=Object(r.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap"},[e("div",{staticClass:"main"},[t._m(0),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"box bg-white flex justify-center p-20"},[e("div",{staticClass:"left"},[e("p",[t._v("\n                        订单号：\n                        "),e("span",{staticClass:"order"},[t._v(t._s(t.orderNum))])]),t._v(" "),e("p",{staticClass:"m-t-xs"},[t._v("\n                        订单金额:\n                        "),e("span",[t._v("¥ ")]),t._v(" "),e("span",{staticClass:"money text-error"},[t._v(t._s(t.realMoney))])]),t._v(" "),e("div",{staticClass:"m-t"},[e("div",["alipay"==t.payType?e("iframe",{staticStyle:{margin:"0 auto",width:"300px",height:"300px"},attrs:{src:t.payString,frameborder:"0"}}):t._e(),t._v(" "),t.payResult?e("div",{staticClass:"pay-result"},[e("div",{staticClass:"msg"},[t._v("\n                                    "+t._s(t.payResult)+"\n                                ")])]):t._e()]),t._v(" "),e("div",{staticClass:"m-t flex justify-center"},[t._m(1),t._v(" "),e("div",[t.qrTypeList[t.payType]?e("span",[t._v("请使用手机"+t._s(t.qrTypeList[t.payType].name))]):t._e(),t._v(" "),e("span",[t._v("扫一扫付款")])])])]),t._v(" "),e("div",{staticClass:"m-t-sm flex justify-center"},[e("div",[e("p",{staticClass:"cursor-pointer text-gray ts-14",on:{click:function(e){return t.$router.push({path:"/user/center"})}}},[t._v("支付成功无反应？")])])])]),t._v(" "),e("div",{staticClass:"middle"})])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"main-banner"},[t("h1",{staticClass:"title"},[this._v("收银台")]),this._v(" "),t("p",{staticClass:"info"}),t("p",{staticClass:"m-b-sm"},[t("span",{staticClass:"xyicon xyicon-check3 m-r-xs"}),this._v(" "),t("span",[this._v("订单创建成功")])]),this._v(" "),t("p")])},function(){var t=this._self._c;return t("div",{staticClass:"m-r-xs"},[t("i",{staticClass:"xyicon xyicon-scan text-primary"})])}],!1,null,"c5274b76",null);e.default=n.exports}}]);