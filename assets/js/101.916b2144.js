(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{288:function(t,e,s){"use strict";var i=s(292),a=s.n(i),n=s(73);let r={request:async(t,e)=>{let s=localStorage.getItem("userState");s&&(s=JSON.parse(s)),console.log("userState",s);let i="";"string"==typeof t?e.url=t:e=t,e.url.startsWith("/")&&(i="https://fastview.lingyun.net/api"+e.url);const n={"Content-Type":"application/json",Authorization:s?s.token:""};let r=(await a()(i,{method:e.method,data:e&&e.data?e.data:{},params:e&&e.params?e.params:{},headers:n})).data;if(401!=r.code)return r;alert("未登录")},formatTime:function(t,e){return r.timeFormat(t,e)},timeFormat:function(t,e){if(!t)return"";e||(e="yyyy-MM-dd HH:mm");let s="";if("object"==typeof t)s=t;else{if("number"!=typeof t)return t;s=new Date(1e3*t)}/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds()};for(let t in i)if(new RegExp(`(${t})`).test(e)){let s=i[t]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:r.padLeftZero(s))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)},showToast:function(t){Object(n.Message)(t.msg)}};e.a=r},306:function(t,e,s){"use strict";s.r(e);var i=s(288),a={name:"xySendVerify",props:{verifyUser:{type:[Boolean,Number],default:!1},noNeedAccount:{type:Boolean,default:!1},account:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:"/v1/sms/verify/send"},type:{type:String,default:""},time:{type:Number,default:30},capthaOptions:Object},data(){return{CaptchaId:"",label:this.$t("Send"),timeLeft:0,capthaOptionsData:{}}},created:function(){this.type||(this.type=this.$t("mobile"))},methods:{$t:t=>t,captchaSuccess(){this.sendVerify()},doClick(t){this.timeLeft>0&&t.stopPropagation(),this.account||this.noNeedAccount||(this.$message(this.$t("Please enter")+this.type),t.stopPropagation())},async sendVerify(){if(this.timeLeft>0)return;if(!this.account&&!this.noNeedAccount)return this.$message(this.$t("Please enter")+this.type),!1;this.timeLeft=this.time,this.label=this.$t("left")+this.timeLeft+"s";var t=setInterval(()=>{this.timeLeft--,this.timeLeft<=0?(this.label=this.$t("Send"),this.timeLeft=0,clearInterval(t)):this.label=this.$t("left")+this.timeLeft+"s"},1e3);let e={};e=this.type==this.$t("mobile")?{mobile:this.account,title:this.title}:{email:this.account,title:this.title},e.verifyUser=this.verifyUser,alert(this.url);const s=await i.a.request(this.url,{method:"post",data:e});"200"==s.code?(this.$message(s.msg),this.$emit("verifysuccess",s.data)):this.$message(s.msg)}}},n=s(6),r=Object(n.a)(a,(function(){var t=this._self._c;return t("span",{on:{click:this.captchaSuccess}},[t("span",{staticClass:"send-verify p-l-xs p-r-xs lh-1 cursor-pointer",attrs:{id:this.CaptchaId,type:"text"}},[t("span",{on:{click:this.doClick}},[this._v(this._s(this.label))])])])}),[],!1,null,"f9709f04",null);e.default=r.exports}}]);