(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{288:function(t,e,s){"use strict";var a=s(292),r=s.n(a),o=s(73);let i={request:async(t,e)=>{let s=localStorage.getItem("userState");s&&(s=JSON.parse(s)),console.log("userState",s);let a="";"string"==typeof t?e.url=t:e=t,e.url.startsWith("/")&&(a="https://fastview.lingyun.net/api"+e.url);const o={"Content-Type":"application/json",Authorization:s?s.token:""};let i=(await r()(a,{method:e.method,data:e&&e.data?e.data:{},params:e&&e.params?e.params:{},headers:o})).data;if(401!=i.code)return i;alert("未登录")},formatTime:function(t,e){return i.timeFormat(t,e)},timeFormat:function(t,e){if(!t)return"";e||(e="yyyy-MM-dd HH:mm");let s="";if("object"==typeof t)s=t;else{if("number"!=typeof t)return t;s=new Date(1e3*t)}/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds()};for(let t in a)if(new RegExp(`(${t})`).test(e)){let s=a[t]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:i.padLeftZero(s))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)},showToast:function(t){Object(o.Message)(t.msg)}};e.a=i},319:function(t,e,s){"use strict";s.r(e);var a=s(288),r={props:{successUrl:String,tradeNo:String},data:()=>({showDialog:!1,timer:null,payResult:""}),methods:{toggleDialog(t){t?this.timer=setInterval(()=>{this.getPayResult()},3e3):clearInterval(this.timer),this.showDialog=t},successPay(){this.toggleDialog(!1),this.successUrl&&this.$router.push({path:this.successUrl})},hasProblem(){alert("请联系客服支持")},getPayResult:async function(){let t=await a.a.request({url:"/v1/pay/order/info",data:{tradeNo:this.tradeNo},method:"get"});200==t.code?t.data.info.payTime>0&&(clearInterval(this.timer),this.payResult="支付成功，即将跳转。",setTimeout(()=>{this.$router.push({path:this.successUrl})},1e3)):console.log(t)}},created(){this.router=this.$router}},o=s(6),i=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"提示",width:"700px"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[t._t("default",(function(){return[e("div",{staticClass:"lh-1-6"},[t._v("\n        请在新页面打开的支付网页进行付款，如果页面没有正常打开请检查浏览器地址栏右侧是否存在拦截弹窗图标。\n        如果您付款后没有正确获得订单信息，您可以联系客服进行解决。\n      ")])]})),t._v(" "),e("div",{staticClass:"tip text-center lh-2 m-t-sm m-b"},[t._v("\n      "+t._s(t.payResult)+"\n    ")]),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("el-button",{attrs:{type:"danger",size:"default"},on:{click:t.hasProblem}},[t._v("遇到问题？")]),t._v(" "),e("el-button",{attrs:{type:"success",size:"default"},on:{click:t.successPay}},[t._v("支付成功")])],1)],2)}),[],!1,null,"33c658e8",null);e.default=i.exports}}]);