(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{306:function(t,e,s){"use strict";s.r(e);var i=s(291),a=s.n(i),h={name:"xySendVerify",props:{verifyUser:{type:[Boolean,Number],default:!1},noNeedAccount:{type:Boolean,default:!1},account:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:"/v1/sms/verify/send"},type:{type:String,default:""},time:{type:Number,default:30},capthaOptions:Object},data(){return{CaptchaId:"",label:this.$t("Send"),timeLeft:0,capthaOptionsData:{}}},created:function(){this.type||(this.type=this.$t("mobile"))},methods:{$t:t=>t,captchaSuccess(){this.sendVerify()},doClick(t){this.timeLeft>0&&t.stopPropagation(),this.account||this.noNeedAccount||(this.$message(this.$t("Please enter")+this.type),t.stopPropagation())},async sendVerify(){if(this.timeLeft>0)return;if(!this.account&&!this.noNeedAccount)return this.$message(this.$t("Please enter")+this.type),!1;this.timeLeft=this.time,this.label=this.$t("left")+this.timeLeft+"s";var t=setInterval(()=>{this.timeLeft--,this.timeLeft<=0?(this.label=this.$t("Send"),this.timeLeft=0,clearInterval(t)):this.label=this.$t("left")+this.timeLeft+"s"},1e3);let e={};e=this.type==this.$t("mobile")?{mobile:this.account,title:this.title}:{email:this.account,title:this.title},e.verifyUser=this.verifyUser;let s=(await a.a.post(this.url,e)).data;"200"==s.code?(this.$message(s.msg),this.$emit("verifysuccess",s.data)):this.$message(s.msg)}}},n=s(6),l=Object(n.a)(h,(function(){var t=this._self._c;return t("span",{on:{click:this.captchaSuccess}},[t("span",{staticClass:"send-verify p-l-xs p-r-xs lh-1 cursor-pointer",attrs:{id:this.CaptchaId,type:"text"}},[t("span",{on:{click:this.doClick}},[this._v(this._s(this.label))])])])}),[],!1,null,"47f6b804",null);e.default=l.exports}}]);