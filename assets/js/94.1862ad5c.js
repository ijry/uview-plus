(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{290:function(t,e,s){"use strict";var a=s(291),i=s.n(a),n=s(73);let o={request:async(t,e)=>{let s=localStorage.getItem("userState");s&&(s=JSON.parse(s)),console.log("userState",s);let a="";"string"==typeof t?e.url=t:e=t,e.url.startsWith("/")&&(a="https://fastview.lingyun.net/api"+e.url);const n={"Content-Type":"application/json",Authorization:s?s.token:""};let o=(await i()(a,{method:e.method,data:e&&e.data?e.data:{},params:e&&e.params?e.params:{},headers:n})).data;if(401!=o.code)return o;alert("未登录")},formatTime:function(t,e){return o.timeFormat(t,e)},timeFormat:function(t,e){if(!t)return"";e||(e="yyyy-MM-dd HH:mm");let s="";if("object"==typeof t)s=t;else{if("number"!=typeof t)return t;s=new Date(1e3*t)}/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds()};for(let t in a)if(new RegExp(`(${t})`).test(e)){let s=a[t]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:o.padLeftZero(s))}return e},padLeftZero:function(t){return("00"+t).substr(t.length)},showToast:function(t){Object(n.Message)(t.msg)}};e.a=o},552:function(t,e,s){"use strict";s.r(e);var a=s(290),i={data:()=>({userState:{token:"",userInfo:{avatar:"",nickname:"",emial:""}},vipInfo:{typeInfo:{title:""},expireTime:0}}),mounted(){if(localStorage){let t=localStorage.getItem("userState");t&&"null"!=t?(this.userState=JSON.parse(t),this.userState.token||this.$router.push({path:"/user/login"})):this.$router.push({path:"/user/login"}),this.loadVipInfo()}},methods:{$t:t=>t,timeFormat:(t,e)=>a.a.timeFormat(t,e),openBuyVip(){this.$router.push({path:"/user/vip"})},logout(){this.userState={token:"",userInfo:{avatar:"",nickname:"",emial:""}},localStorage.setItem("userState",""),localStorage.setItem("adExpire2","")},async loadVipInfo(){let t=await a.a.request({url:"/v1/user_vip/order/my?productName=fastview",method:"get"});200==t.code?t.data.dataList.length>0&&(this.vipInfo=t.data.dataList[0]):this.$message(t.msg)}}},n=s(6),o=Object(n.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-4"},[e("h1",{staticClass:"my-4 max-w-sm mx-auto"},[t._v(t._s(t.$t("用户中心")))]),t._v(" "),e("div",{staticClass:"max-w-sm mx-auto shadow-sm rounded-sm overflow-hidden"},[e("div",{staticClass:"flex items-center p-4"},[e("img",{staticClass:"w-16 h-16 rounded-full",attrs:{src:t.userState.userInfo.avatar,alt:"Avatar"}}),t._v(" "),e("div",{staticClass:"ml-4"},[e("h2",{staticClass:"text-xl font-semibold"},[t._v("\n          "+t._s(t.userState.userInfo.nickname)+"\n          "),e("span",{staticClass:"text-sm"},[t._v("(uid: "+t._s(t.userState.userInfo.id)+")")])]),t._v(" "),e("p",{staticClass:"text-gray-600"},[t._v(t._s(t.userState.userInfo.email))])])])]),t._v(" "),e("div",{staticClass:"mt-3 max-w-sm mx-auto shadow-sm rounded-sm overflow-hidden"},[e("div",{staticClass:"flex items-center p-4"},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"mb-2 w-full text-gray-600 flex justify-between"},[e("div",{staticClass:"w-120px"},[t._v("\n            "+t._s(t.$t("会员"))+"\n          ")]),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"},attrs:{clas:"flex-1 flex justify-end"}},[t.vipInfo.typeInfo&&t.vipInfo.expireTime>0?e("el-button",{attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t(t.vipInfo.typeInfo.title))+"已开通\n              （到期"+t._s(t.timeFormat(t.vipInfo.expireTime))+"）\n            ")]):t._e(),t._v(" "),t.vipInfo.typeInfo&&t.vipInfo.expireTime>0?e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.openBuyVip}},[t._v("续期\n            ")]):e("el-button",{attrs:{size:"mini"},on:{click:t.openBuyVip}},[t._v(t._s(t.$t("立即开通")))])],1)]),t._v(" "),e("div",{staticClass:"mb-2 w-full text-gray-600 flex justify-between",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"w-120px"},[t._v(t._s(t.$t("注销")))]),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"},attrs:{clas:"flex-1 flex justify-end"}},[e("el-button",{attrs:{size:"mini"},on:{click:t.logout}},[t._v(t._s(t.$t("退出登录")))])],1)])])])])])}),[],!1,null,null,null);e.default=o.exports}}]);